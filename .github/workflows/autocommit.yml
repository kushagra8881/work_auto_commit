name: Auto Commit Bot

on:
  push:
    branches:
      - main

  schedule:
    # Run at 7 AM, 9 AM, 11 AM every day
    - cron: "0 7 * * *"
    - cron: "0 9 * * *"
    - cron: "0 11 * * *"

jobs:
  auto_commit:
    runs-on: ubuntu-latest

    steps:
      - name: DEBUG
        run: echo "::debug::Ref = ${{ github.ref }}"

      - uses: actions/checkout@v3
        with:
          persist-credentials: false
          fetch-depth: 0

      # ğŸ†• Random file update
      - name: Modify random file
        run: |
          files=("file1.txt" "file2.txt" "file3.txt" "status.log" "note.md" "LAST_UPDATED")
          index=$(($RANDOM % ${#files[@]}))
          
          selected=${files[$index]}
          echo "Updating: $selected"
          
          # Write timestamp for randomness
          echo "Updated at: $(date '+%Y-%m-%d %H:%M:%S')" > "$selected"

      # ğŸ†• Improved random emoji commit messages
      - name: Commit changes
        run: |
          git config --local user.email "kushagrparashar900@gmail.com"
          git config --local user.name "kushagra8881"
          git add -A

          # 30+ fun emojis
          commits=(
            "ğŸ¤– Auto update"
            "ğŸ”¥ Auto commit"
            "âš¡ Bot updated files"
            "âœ¨ Routine maintenance"
            "ğŸ“Œ Daily auto update"
            "ğŸš€ Commit by GitHub Action"
            "ğŸ› ï¸ Auto fix"
            "ğŸŒŸ Automated patch"
            "ğŸ¯ Bot target achieved"
            "ğŸ“… Cron job update"
            "ğŸ“¦ Scheduled update"
            "ğŸ”„ Routine sync"
            "ğŸ Legendary auto commit"
            "ğŸ˜ Cool bot update"
            "ğŸ¤© Random update"
            "ğŸ˜ˆ Bot is working"
            "ğŸ‘» Ghost commit"
            "ğŸŒˆ Auto update magic"
            "ğŸ’¡ Auto improvement"
            "ğŸ‰ Random commit"
            "ğŸ’« Automated tweak"
            "ğŸ’» Code heartbeat"
            "ğŸ“‚ File refresh"
            "ğŸ“ˆ Auto status update"
            "â¤ï¸ Bot loves commits"
            "ğŸ’¥ Boom! Auto commit"
            "ğŸ™Œ Auto push success"
            "ğŸ±â€ğŸ‘¤ Stealth commit"
            "ğŸ§  Smart bot update"
            "ğŸ² Randomized update"
          )

          msg_index=$(($RANDOM % ${#commits[@]}))
          git commit -m "${commits[$msg_index]}" || echo "No changes to commit"

      - name: GitHub Push
        uses: ad-m/github-push-action@v0.6.0
        with:
          directory: "."
          branch: main
          github_token: ${{ secrets.GITHUB_TOKEN }}
